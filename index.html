<!DOCTYPE html>
<meta name="robots" content="noindex">
<html>
<head>
  <meta name="description" content="MDict JS">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MDict JS Pro</title>
  
  <link rel="stylesheet" type="text/css" href="selectize.default.css">
  
  <style>
    /* --- 1. å…¨å±€é‡ç½®ä¸å˜é‡ --- */
    :root {
        --primary: #007AFF;
        --bg-page: #F5F5F7;
        --bg-card: #FFFFFF;
        --text-main: #1D1D1F;
        --text-sub: #86868B;
        --border: #E5E5EA;
        --radius: 16px;
        --shadow: 0 10px 40px rgba(0,0,0,0.08);
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, sans-serif;
        background-color: var(--bg-page);
        color: var(--text-main);
        margin: 0;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        /* align-items: center;  å¦‚æœæƒ³å‚ç›´å±…ä¸­å–æ¶ˆæ³¨é‡Š */
    }

    /* --- 2. ä¸»å®¹å™¨å¡ç‰‡ --- */
    .container {
        width: 100%;
        max-width: 720px;
        background: var(--bg-card);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 30px;
        position: relative;
        display: flex;
        flex-direction: column;
    }

    h2.app-title {
        margin: 0 0 24px 0;
        text-align: center;
        font-size: 22px;
        font-weight: 700;
        letter-spacing: -0.5px;
    }

    /* --- 3. æ–‡ä»¶ä¸Šä¼ ç¾åŒ– --- */
    .file-upload-wrapper {
        margin-bottom: 24px;
        text-align: center;
        padding: 20px;
        border: 2px dashed var(--border);
        border-radius: 12px;
        transition: 0.3s;
        background: #FAFAFA;
    }
    .file-upload-wrapper:hover {
        border-color: var(--primary);
        background: #F0F7FF;
    }
    
    /* éšè—åŸç”Ÿä¸‘é™‹çš„ inputï¼Œä½†ä¸ç ´ååŠŸèƒ½ */
    #dictfile {
        display: none; 
    }
    /* ç”¨ Label æ›¿ä»£ç‚¹å‡» */
    .file-upload-label {
        cursor: pointer;
        display: block;
        color: var(--primary);
        font-weight: 600;
        font-size: 15px;
    }
    .file-upload-hint {
        display: block;
        margin-top: 6px;
        font-size: 12px;
        color: var(--text-sub);
    }

    /* --- 4. æœç´¢æ åŒºåŸŸ --- */
    .search-wrapper {
        display: flex;
        gap: 12px;
        margin-bottom: 16px;
    }

    #word {
        flex: 1;
        height: 48px;
        padding: 0 16px;
        font-size: 17px;
        border: 1px solid #D1D1D6;
        border-radius: 12px;
        background: #F2F2F7;
        transition: 0.2s;
        /* è¦†ç›– selectize å¯èƒ½å¸¦æ¥çš„æ ·å¼ */
        box-shadow: none; 
    }
    #word:focus {
        background: #fff;
        border-color: var(--primary);
        outline: none;
    }

    #btnLookup {
        height: 48px;
        padding: 0 24px;
        border: none;
        border-radius: 12px;
        background-color: var(--primary);
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: 0.2s;
        /* è¦†ç›–åŸæœ‰çš„æ ·å¼ */
        vertical-align: middle; 
        border-width: 0;
    }
    
    #btnLookup:hover { opacity: 0.9; }
    #btnLookup:active { transform: scale(0.96); }
    #btnLookup:disabled { 
        background-color: #C7C7CC; 
        cursor: not-allowed; 
        opacity: 1; 
    }

    /* åŠ è½½æ¡åŠ¨ç”» (ä¿ç•™åŸæœ‰é€»è¾‘ class="stripes") */
    .stripes {
        background-image: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent) !important;
        background-size: 20px 20px !important;
        animation: animate-stripes 1s linear infinite;
    }
    @keyframes animate-stripes { 0% {background-position: 0 0;} 100% {background-position: 40px 0;} }

    /* --- 5. å¸®åŠ©æç¤ºæ–‡æœ¬ --- */
    .help-text {
        font-size: 13px;
        color: var(--text-sub);
        background: #F2F2F7;
        padding: 12px 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        line-height: 1.5;
    }
    .help-text ul { margin: 4px 0 0 20px; padding: 0; }
    .help-text li { margin-bottom: 2px; }

    /* --- 6. è¯å…¸æ ‡é¢˜ --- */
    #dict-title {
        position: static !important; /* è¦†ç›–åŸæœ‰ç»å¯¹å®šä½ */
        text-align: center;
        margin-bottom: 20px;
        padding: 8px;
        background: #FFF9C4; /* æµ…é»„èƒŒæ™¯æç¤º */
        border-radius: 6px;
        font-size: 12px !important;
        color: #B7950B;
        display: none; /* é»˜è®¤éšè—ï¼Œæœ‰å†…å®¹æ—¶ JS ä¼šæ˜¾ç¤ºå—ï¼ŸåŸé€»è¾‘ä¼¼ä¹æ˜¯ç›´æ¥æ¸²æŸ“ */
    }
    /* åŸé€»è¾‘å¯èƒ½ä¼šç»™å®ƒåŠ å†…å®¹ï¼Œå¦‚æœä¸åŠ  display:none å¯èƒ½ä¼šå ä½ */
    #dict-title:not(:empty) { display: block; }


    /* --- 7. ç»“æœæ˜¾ç¤ºåŒº --- */
    #definition {
        flex: 1;
        padding-top: 20px;
        border-top: 1px solid var(--border);
        line-height: 1.7;
        font-size: 16px;
        color: #333;
        min-height: 200px;
    }

    /* è¯å…¸å†…å®¹é€šç”¨ç¾åŒ– */
    #definition b, #definition strong { color: var(--primary); }
    #definition i, #definition em { color: #FF2D55; font-style: italic; margin-right: 4px; }
    #definition a { color: var(--primary); text-decoration: none; border-bottom: 1px dashed rgba(0,122,255,0.3); }
    
    /* éšè—ä¸å¿…è¦çš„å…ƒç´  */
    #definition img { display: none !important; }
    #definition a[href^="sound:"] { display: none !important; }

    /* Selectize ä¿®æ­£ (å¦‚æœç”¨äº†çš„è¯) */
    .selectize-control { width: 100% !important; min-width: 0 !important; }
    .selectize-input { 
        height: 48px !important; 
        padding: 10px 16px !important; 
        border-radius: 12px !important; 
        border: 1px solid #D1D1D6 !important;
        box-shadow: none !important;
        background: #F2F2F7 !important;
        font-size: 17px !important;
    }
    .selectize-input.focus { background: #fff !important; border-color: var(--primary) !important; }

  </style>

</head>
<body>

<div class="container">
    <h2 class="app-title">ğŸ“š MDict Web Reader</h2>

    <div class="file-upload-wrapper">
        <label for="dictfile" class="file-upload-label">
            ğŸ“‚ Click to Select Dictionary Files
            <span class="file-upload-hint">Supported: .mdx (Required) + .mdd (Optional)</span>
        </label>
        <input id="dictfile" type="file" multiple>
    </div>

    <div id="dict-title"></div>

    <div class="search-wrapper">
        <input id="word" type="text" value="" placeholder="Type a word...">
        <input id="btnLookup" type="button" value="Search" disabled="true">
    </div>

    <div class="help-text">
        <strong>Tips:</strong> Wildcards are supported:
        <ul>
          <li>"*" for 0 or more characters</li>
          <li>"?" for just 1 character</li>
        </ul>
    </div>
  
    <div id="definition">
        <div style="text-align:center; color:#ccc; margin-top:60px;">Definition will appear here</div>
    </div>
</div>

<script type="text/javascript" src="conf.js"></script>
<script src="require.js" data-main="mdict"></script>

<script>
    document.getElementById('dictfile').addEventListener('change', function(e) {
        var fileName = e.target.files[0] ? e.target.files[0].name : "Click to Select Dictionary Files";
        if(e.target.files.length > 1) fileName += " (and " + (e.target.files.length - 1) + " other)";
        document.querySelector('.file-upload-label').innerHTML = "ğŸ“„ " + fileName;
        document.querySelector('.file-upload-wrapper').style.borderColor = "#34C759";
        document.querySelector('.file-upload-wrapper').style.background = "#F0FFF4";
    });
</script>

</body>
</html>
